#include<stdio.h>
#include "lookup_table.h"

int main() {

    // define lookup table data
    float r32_press_array[7] = {
        110.142926849089,
        231.114738225980,
        437.284780966014,
        762.263212281973,
        1244.489250026626,
        1927.506741576540,
        2794.781025577219
        };
    float r32_temp_array[7] = {
        -49.344259114842977,
        -33.446462006616727,
        -17.525282823870064,
        -1.586145778742001,
        14.367232386563709,
        30.332806808401493,
        45.322264562498368
        };
    
    // declare lookup table object
    lookup_table_data_t r32_press_temp_lookup_table;
    LookupTableInit(&r32_press_temp_lookup_table, r32_press_array, r32_temp_array);
    
    printf("breakpoint data sample: %f table value sample: %f \n", 
    r32_press_temp_lookup_table.breakpoints_data[0], r32_press_temp_lookup_table.table_values_data[2]);

    float y;

    // define u_vector
    // float u_vector[] = {0.1101429,   0.2311147,   0.4372848,   0.7622632,   1.2444893,   1.9275067,   2.8616054};
    // float u_vector[] = {
    //     2.579643609974019,
    //     2.855679658793087,
    //     0.495051374734002,
    //     2.878667198765986,
    //     2.026880609347734,
    //     0.405796656820650,
    //     0.954296046768753,
    //     1.767789939965822,
    //     3.012432161460429,
    //     3.034806756573699,
    //     0.110092926849089,
    //     3.141282760578521
    // };
    
    // float y_vector[] = {
    //     41.651352241928464,
    //     45.912048702546997,
    //     -14.606865988173922,
    //     46.252456142796177,
    //     31.951262590076965,
    //     -19.997124290169580,
    //     5.096971210662957,
    //     26.698464833032062,
    //     48.193013429389964,
    //     48.511122035354958,
    //     -50.009061717983656,
    //     50.000690300661006
    // };

    float u_vector[] = {
        2.579643609974019,
        2.855679658793087,
        0.495051374734002,
        2.878667198765986,
        2.026880609347734,
        0.405796656820650,
        0.954296046768753,
        1.767789939965822,
        3.012432161460429,
        3.034806756573699,
        0.587882336384672,
        3.052096840334860,
        3.011401932850106,
        1.581360121232721,
        2.535864920230154,
        0.540213165407133,
        1.388539262878276,
        2.885819567634552,
        2.511394509682996,
        3.018450666029002,
        0.110092926849089,
        3.141282760578521	
    };

    // float y_vector[] = {
    //     41.603956223371810,
    //     46.374800659453349,
    //     -14.646037307140844,
    //     46.772103756813621,
    //     32.050326191019735,
    //     -19.696694788212579,
    //     4.854840508611460,
    //     26.745849452028679,
    //     49.084018561940155,
    //     49.470727881474332,
    //     -49.350982935366460,
    //     51.310996402400598
    // };

    float y_vector[] = {
        41.603956223371810,
        46.374800659453349,
        -14.646037307140844,
        46.772103756813621,
        32.050326191019735,
        -19.696694788212579,
        4.854840508611460,
        26.745849452028679,
        49.084018561940155,
        49.470727881474332,
        -10.019087495631076,
        49.769559502431882,
        49.066212697617445,
        22.335873734340908,
        40.847311142857833,
        -12.395049758085563,
        17.774718716407985,
        46.895721086388448,
        40.424378984152497,
        49.188038848990892,
        -49.350982935366460,
        51.310996402400598
    };
    // convert to kPa
    for (int j = 0; j < sizeof(u_vector)/sizeof(u_vector[0]); j++) 
        u_vector[j] = u_vector[j] * 1000.0;

    for (int j = 0; j < sizeof(u_vector)/sizeof(u_vector[0]); j++) {
        y = LookupTable(&r32_press_temp_lookup_table, u_vector[j]);
        printf("x: %f y: %f error: %f\n", u_vector[j], y, y-y_vector[j]);
    }

    // for (float j = r32_press_array[0] - 0.2; j < 5.2; j += 0.1) {
    //     y = LookupTable(&r32_press_temp_lookup_table, j);
    //     printf("multiple: %f \n", y / j );
    // }

    return 0;

}